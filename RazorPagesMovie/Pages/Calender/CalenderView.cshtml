@page
@model RazorPagesMovie.Pages.Calender.CalendarViewModel

<div class="card mb-2" style="background-color:#295F98">
    <div class="card-body d-flex justify-content-center align-items-center mb-2" style="height: 50px ; overflow: hidden;">
        <h2 style="color: white">Reservations Calender</h2>
    </div>
</div>
<!-- Wrapper for the calendar table to enable horizontal scrolling -->
<div class="calendar-wrapper">
    <table>
        <thead>
            <tr>
                <th>Room No</th>
                @foreach (var date in Model.DateRange)
                {
                    <th>@date.ToString("dd MMM")</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var room in Model.Rooms)
            {
                <tr>
                    <td>@room.RoomNo</td>
                    @foreach (var date in Model.DateRange)
                    {
                        var reservation = Model.Reservations
                        .FirstOrDefault(r => r.RoomId == room.Id && r.CheckInDate <= date && r.CheckOutDate >= date);

                        if (reservation != null)
                        {
                            <td class="reserved">test</td>
                        }
                        else
                        {
                            <td></td>
                        }
                    }
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Styles for the calendar -->
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }

    table, th, td {
        border: 1px solid black;
        padding: 10px;
        text-align: center;
    }

    .reserved {
        background-color: #FFD700;
    }

    /* Wrapper to enable horizontal scrolling */
    .calendar-wrapper {
        overflow-x: auto; /* Adds horizontal scroll when necessary */
        max-width: 100%; /* Ensures the calendar doesn't overflow beyond the container */
    }

        /* To ensure the table takes full width but can be scrolled */
        .calendar-wrapper table {
            width: max-content; /* Ensures the table doesn't shrink and respects its full content */
        }
</style>
